FROM --platform=linux/amd64 public.ecr.aws/lambda/python:3.9

# Install system dependencies
RUN yum update -y && \
    yum install -y \
    # Basic tools
    curl wget tar gzip bzip2 \
    # Development tools for building
    gcc gcc-c++ make \
    # Network libraries
    nss \
    && yum clean all && rm -rf /var/cache/yum

# Copy requirements and install Python packages
COPY requirements_delaware.txt /var/task/requirements.txt
RUN pip install -r /var/task/requirements.txt

# Copy the Lambda function code
COPY delaware_lambda.py /var/task

# Set the CMD to your handler
CMD ["delaware_lambda.lambda_handler"]
