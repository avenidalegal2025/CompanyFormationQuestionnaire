FROM --platform=linux/amd64 public.ecr.aws/lambda/python:3.9

# Install system dependencies
RUN yum update -y && \
    yum install -y \
    wget \
    unzip \
    && yum clean all

# Copy requirements and install Python dependencies
COPY requirements_playwright.txt /var/task/requirements.txt
RUN pip install -r /var/task/requirements.txt

# Install Playwright with system dependencies
RUN playwright install chromium --with-deps

# Copy Lambda function and dependencies
COPY delaware_lambda_playwright.py /var/task/simple_lambda.py
COPY name_check.py /var/task/name_check.py

CMD ["simple_lambda.lambda_handler"]
